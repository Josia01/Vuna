<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>üíå Lisa, will you be my Valentine? üíò</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(145deg, #fff9f7 0%, #ffe5e5 100%);
            font-family: 'Segoe UI', 'Helvetica Neue', -apple-system, BlinkMacSystemFont, Roboto, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 16px;
            touch-action: pan-y; 
        }

        .valentine-wrapper {
            max-width: 550px;
            width: 100%;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 48px 24px 48px 24px;
            box-shadow: 0 20px 40px rgba(220, 80, 120, 0.2);
            padding: 32px 24px;
            border: 2px solid rgba(255, 200, 200, 0.7);
            transition: all 0.3s ease;
        }

        .card {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .title {
            font-size: 2.2rem;
            font-weight: 700;
            color: #b34167;
            text-shadow: 2px 2px 0 #ffe0e0;
            letter-spacing: 2px;
            margin-bottom: 8px;
            word-break: break-word;
        }

        .lisa-name {
            background: #ffdae0;
            padding: 8px 20px;
            border-radius: 60px;
            font-size: 1.9rem;
            display: inline-block;
            color: #a12e4e;
            box-shadow: 0 6px 0 #ffa5b0;
            margin-bottom: 24px;
            font-weight: 600;
            border: 2px solid white;
        }

        .question {
            font-size: 1.8rem;
            color: #ce3b5e;
            margin-bottom: 32px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .heart-big {
            font-size: 3rem;
            animation: pulse 1.2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .buttons-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 24px;
            margin-top: 16px;
            margin-bottom: 24px;
            width: 100%;
            position: relative;
        }

        .btn {
            border: none;
            background: white;
            padding: 16px 32px;
            font-size: 1.6rem;
            font-weight: bold;
            border-radius: 120px;
            box-shadow: 0 12px 0 #b3b3b3, 0 10px 20px rgba(0,0,0,0.1);
            transition: all 0.12s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            cursor: pointer;
            touch-action: manipulation;
            border: 2px solid white;
            letter-spacing: 2px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 0 1 auto;
            min-width: 140px;
        }

        .btn-yes {
            background: #ff6b8b;
            color: white;
            box-shadow: 0 12px 0 #b3415c;
            border: 2px solid #ffe0e0;
        }

        .btn-no {
            background: #f0f0f0;
            color: #444;
            box-shadow: 0 12px 0 #a0a0a0;
            position: relative;
            transition: all 0.1s ease;
        }

        .btn-yes:active {
            transform: translateY(8px);
            box-shadow: 0 4px 0 #b3415c, 0 10px 20px rgba(0,0,0,0.1);
        }

        /* no button gets crazy */
        .btn-no.evasive {
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), 
                        box-shadow 0.2s, 
                        background 0.2s,
                        left 0.2s,
                        top 0.2s,
                        right 0.2s,
                        bottom 0.2s;
        }

        .message-area {
            min-height: 70px;
            margin: 16px 0 8px;
            font-size: 1.5rem;
            color: #c1315a;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.7);
            padding: 12px 18px;
            border-radius: 50px;
            backdrop-filter: blur(4px);
            width: 100%;
            border: 1px dashed #ff869a;
        }

        /* heart canvas fullscreen overlay */
        .heart-canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
            display: none;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
            background: transparent;
        }

        /* mobile-friendly adjustments */
        @media (max-width: 450px) {
            .valentine-wrapper {
                padding: 24px 16px;
            }
            .title {
                font-size: 1.8rem;
            }
            .lisa-name {
                font-size: 1.6rem;
                padding: 6px 16px;
            }
            .question {
                font-size: 1.5rem;
            }
            .btn {
                padding: 14px 20px;
                font-size: 1.4rem;
                min-width: 120px;
            }
            .btn-no {
                min-width: 120px;
            }
            .heart-big {
                font-size: 2.5rem;
            }
        }

        @media (max-width: 380px) {
            .btn {
                padding: 14px 16px;
                font-size: 1.3rem;
                min-width: 110px;
            }
            .buttons-container {
                gap: 16px;
            }
        }

        .fun-footer {
            margin-top: 24px;
            color: #e05270;
            font-size: 1.1rem;
            opacity: 0.9;
        }
    </style>
</head>
<body>

    <div class="valentine-wrapper" id="valentineCard">
        <div class="card">
            <span class="heart-big">‚ù§Ô∏èüß°üíõ</span>
            <div class="title">VALENTINE'S DAY</div>
            <span class="lisa-name">üíï Lisa üíï</span>
            
            <div class="question">
                <span>Will you be my Valentine?</span>
            </div>

            <!-- Buttons: YES and the tricky NO -->
            <div class="buttons-container" id="buttonContainer">
                <button class="btn btn-yes" id="yesBtn">YES üíñ</button>
                <button class="btn btn-no" id="noBtn">NO üôÖ‚Äç‚ôÄÔ∏è</button>
            </div>

            <!-- message that changes with "no" clicks -->
            <div class="message-area" id="messageBox">
                üòä I hope you say YES, Lisa!
            </div>
            <div class="fun-footer">
                ‚ú® made with love, just for you ‚ú®
            </div>
        </div>
    </div>

    <!-- Canvas for hearts explosion -->
    <div id="heartCanvasContainer" class="heart-canvas-container">
        <canvas id="heartCanvas"></canvas>
    </div>

    <script>
        (function() {
            "use strict";

            // ---------------------  LISA'S VALENTINE MAGIC  -------------------------
            // YES button click ‚Üí show love hearts all over the screen.
            // NO button is EVASIVE: changes text and moves away.
            // After enough "no" clicks, it becomes a YES.
            // Fully mobile friendly (touch events, no double-tap zoom issues)
            
            const noBtn = document.getElementById('noBtn');
            const yesBtn = document.getElementById('yesBtn');
            const messageBox = document.getElementById('messageBox');
            const canvasContainer = document.getElementById('heartCanvasContainer');
            const canvas = document.getElementById('heartCanvas');
            
            // Array of funny "no" button texts ‚Äì each time more insisting
            const noTexts = [
                'NO üôÖ‚Äç‚ôÄÔ∏è', 
                'you mean yes?', 
                'really? üòÖ', 
                'are you sure?', 
                'maybe yes?', 
                'click YES üíï', 
                'Yes is better üíò', 
                'be my valentine?', 
                'I know you mean YES', 
                'Lisa, say YES!', 
                'üíû YES üíû',
                'YES PLEASE!'
            ];
            
            // Corresponding messages for Lisa under the buttons
            const messageTexts = [
                'üò¢ oh Lisa... click YES?',
                'üôà you mean YES, right?',
                'ü•∫ pretty please?',
                'üíó I know you want to say YES!',
                'üå∏ click YES for surprises!',
                'üíì Lisa, be my Valentine!',
                'üíñ YES = more hearts!',
                '‚ú® just one YES?',
                'üéÄ say YEEES!',
                'üéà your YES will make my day!',
                'üíù almost there...',
                '‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è LISA ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è'
            ];

            let noClickCount = 0;
            const MAX_NO_CLICKS_BEFORE_YES = noTexts.length - 1; // last index becomes YES

            // --- canvas hearts animation ---
            let heartsArray = [];
            let animationFrame = null;
            let ctx = canvas.getContext('2d');

            function initCanvasSize() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            // Heart particle class
            class HeartParticle {
                constructor(x, y) {
                    this.x = x || Math.random() * canvas.width;
                    this.y = y || Math.random() * canvas.height;
                    this.size = Math.floor(Math.random() * 24) + 12; // 12-36px
                    this.speedX = (Math.random() - 0.5) * 5;
                    this.speedY = (Math.random() - 0.7) * 5 - 2; // mostly upwards
                    this.opacity = Math.random() * 0.7 + 0.3;
                    this.color = `hsl(${Math.floor(Math.random() * 20) + 330}, 85%, 65%)`; // pink/red hues
                    this.rotation = Math.random() * 360;
                }
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    this.speedY += 0.08; // gravity
                    this.opacity *= 0.995; // fade slowly
                    this.size *= 0.998;
                    return (this.opacity > 0.02 && this.y > -100 && this.y < canvas.height + 100 && this.x > -100 && this.x < canvas.width + 100);
                }
                draw(ctx) {
                    ctx.save();
                    ctx.translate(this.x, this.y);
                    ctx.rotate((this.rotation * Math.PI) / 180);
                    ctx.globalAlpha = this.opacity;
                    ctx.font = `${this.size}px "Segoe UI", "Arial", "Helvetica", sans-serif`;
                    ctx.fillStyle = this.color;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText('‚ù§Ô∏è', 0, 0);
                    ctx.restore();
                }
            }

            function drawHearts() {
                if (!canvasContainer.style.display === 'block') return;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let i = heartsArray.length - 1; i >= 0; i--) {
                    const heart = heartsArray[i];
                    if (!heart.update()) {
                        heartsArray.splice(i, 1);
                    } else {
                        heart.draw(ctx);
                    }
                }
                if (heartsArray.length > 0) {
                    animationFrame = requestAnimationFrame(drawHearts);
                } else {
                    // hide container when all hearts fade
                    canvasContainer.style.display = 'none';
                    animationFrame = null;
                }
            }

            function spawnHearts(count = 80) {
                // end all previous animations
                if (animationFrame) {
                    cancelAnimationFrame(animationFrame);
                    animationFrame = null;
                }
                heartsArray = [];
                initCanvasSize();
                
                // generate lots of hearts all over the screen
                for (let i = 0; i < count; i++) {
                    heartsArray.push(new HeartParticle(
                        Math.random() * canvas.width,
                        Math.random() * canvas.height
                    ));
                }
                // also some hearts from the center (where YES button was)
                for (let i = 0; i < 30; i++) {
                    heartsArray.push(new HeartParticle(canvas.width/2, canvas.height/2));
                }

                canvasContainer.style.display = 'block';
                drawHearts();
            }

            // --- YES button handler: LOVE EXPLOSION! ---
            function onYesClick() {
                // Final message for Lisa
                messageBox.innerHTML = 'üíòüíòüíò YAY! LOVE YOU LISA! üíòüíòüíò';
                // Disable no button? not needed but we can grey it? Let it be there but we already won.
                noBtn.disabled = true;
                noBtn.style.opacity = '0.6';
                noBtn.style.transform = 'scale(0.9)';
                noBtn.innerHTML = 'YES! üíï';
                
                // show canvas hearts all over!
                spawnHearts(140);
                
                // additional love: pulse yes
                yesBtn.style.transform = 'scale(1.2)';
                setTimeout(() => yesBtn.style.transform = 'scale(1)', 200);
                
                // also add hearts to background via canvas
                // re-trigger resize
                window.addEventListener('resize', function resizeHandler() {
                    if (canvasContainer.style.display === 'block') {
                        initCanvasSize();
                    }
                });
            }

            yesBtn.addEventListener('click', onYesClick);
            yesBtn.addEventListener('touchstart', (e) => {
                // avoid double tap zoom on mobile
                e.preventDefault();
            }, { passive: false });

            // --- EVASIVE NO BUTTON with text and position changes ---
            function updateNoButton() {
                noClickCount++;
                
                // If max tries reached -> turn into YES
                if (noClickCount >= noTexts.length) {
                    // become yes button!
                    noBtn.innerHTML = 'üíñ YES üíñ';
                    noBtn.classList.remove('btn-no');
                    noBtn.classList.add('btn-yes');
                    noBtn.style.boxShadow = '0 12px 0 #b3415c';
                    noBtn.disabled = false; 
                    messageBox.innerHTML = 'üíó Lisa wants to say YES! üíó';
                    
                    // make it actually trigger Yes function
                    // remove old listeners, add new click
                    noBtn.replaceWith(noBtn.cloneNode(true)); // simple way to remove all listeners
                    const newNoBtn = document.getElementById('noBtn');
                    newNoBtn.addEventListener('click', function(e) {
                        onYesClick();
                        e.preventDefault();
                    });
                    return;
                }

                // Update no button text
                noBtn.innerHTML = noTexts[noClickCount];
                
                // Update message with corresponding sweet message
                if (noClickCount <= messageTexts.length) {
                    messageBox.innerHTML = messageTexts[noClickCount];
                } else {
                    messageBox.innerHTML = 'üíû Please say YES, Lisa! üíû';
                }

                // EVASIVE MOVEMENT: move the NO button randomly within container
                // Make it mobile friendly ‚Äì relative to parent, avoid overflow
                const container = document.getElementById('buttonContainer');
                const containerRect = container.getBoundingClientRect();
                const noBtnRect = noBtn.getBoundingClientRect();

                // maximum offset so button stays inside container edges
                const maxX = containerRect.width - noBtnRect.width - 8;  // 8px margin
                const maxY = containerRect.height - noBtnRect.height - 8;

                // random offsets, but keep it fully visible
                let deltaX = 0, deltaY = 0;
                if (maxX > 10) {
                    deltaX = Math.floor(Math.random() * maxX) - (parseInt(noBtn.style.left) || 0);
                }
                if (maxY > 10) {
                    deltaY = Math.floor(Math.random() * maxY) - (parseInt(noBtn.style.top) || 0);
                }

                // apply relative positioning
                noBtn.style.position = 'relative';
                noBtn.style.left = (parseInt(noBtn.style.left) || 0) + deltaX + 'px';
                noBtn.style.top = (parseInt(noBtn.style.top) || 0) + deltaY + 'px';
                
                // add wiggle effect
                noBtn.style.transform = `rotate(${Math.random() * 8 - 4}deg)`;
                
                // Also shrink a tiny bit? just for fun
                noBtn.style.scale = 0.95 + (Math.random() * 0.1);
            }

            // NO button click handler ‚Äì never says yes until exhausted, just updates and moves
            function onNoClick(e) {
                e.preventDefault(); // for touch
                // if button already turned YES, then call yes handler
                if (noBtn.classList.contains('btn-yes') || noClickCount >= noTexts.length) {
                    onYesClick();
                    return;
                }
                updateNoButton();
            }

            noBtn.addEventListener('click', onNoClick);
            noBtn.addEventListener('touchstart', (e) => {
                // on mobile prevent pull-to-refresh or zoom
                e.preventDefault();
            }, { passive: false });

            // Reset no button position on window resize to avoid overflow
            window.addEventListener('resize', function() {
                if (!noBtn.classList.contains('btn-yes')) {
                    noBtn.style.left = '0px';
                    noBtn.style.top = '0px';
                    noBtn.style.transform = 'rotate(0deg)';
                    noBtn.style.scale = '1';
                }
            });

            // additional initial messages for lisa
            // Lisa special: if she tries to click near edges, it's fine.

            // Pre-fill with nice message
            messageBox.innerHTML = 'üòä I hope you say YES, Lisa!';

            // --- also pre-move a little bit to show it's playful? maybe not needed.
            // ensure canvas resize on orientation change
            window.addEventListener('orientationchange', function() {
                if (canvasContainer.style.display === 'block') {
                    setTimeout(() => {
                        initCanvasSize();
                    }, 50);
                }
            });

            // disable context menu on buttons to make clean mobile experience
            yesBtn.addEventListener('contextmenu', (e) => e.preventDefault());
            noBtn.addEventListener('contextmenu', (e) => e.preventDefault());

            // one more: after final YES, the no button could already be YES. 
            // if user clicks original YES all good. duplicate prevention 
            // also if NO button becomes yes, add same listener.
            // but we replaced node above, so we attach global if needed.
            // we also want if the button is turned yes (via many no's) to call onYesClick
            // but we already attached in the if condition inside onNoClick. plus the cloneNode approach.
            // However after clone, we need to make sure it triggers yes. we did that.
            // and also for safety: if no button turned yes and we click yes normally
            const originalYes = yesBtn;
            // it's fine

            // Extra love: prevent zoom when double tapping buttons
            document.querySelectorAll('button').forEach(btn => {
                btn.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                }, { passive: false });
            });

            // Styling to ensure canvas sits on top
            // Set canvas container pointer events none, canvas will catch no events.
        })();
    </script>

    <!-- manual touch tweak: avoid long press menu -->
    <script>
        (function disableLongPress() {
            const noTouchSelect = document.querySelectorAll('button, .message-area, .lisa-name');
            noTouchSelect.forEach(el => {
                el.style.webkitTouchCallout = 'none';
                el.style.webkitUserSelect = 'none';
                el.style.userSelect = 'none';
            });
        })();
    </script>

    <!-- ensure canvas container is hidden initially -->
    <style>
        .heart-canvas-container {
            display: none;
        }
    </style>
</body>
</html>